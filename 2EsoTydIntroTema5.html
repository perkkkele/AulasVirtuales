<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Máquinas y Mecanismos</title>
    <style>
        body {
            font-size: 0.9375rem;
            display: flex;
            align-items: flex-start;
            margin: 20px;
        }

        img {
            display: block;
            margin-right: 20px;
            border: none;
            border-radius: 15px; /* Bordes redondeados */
            width: 350px;
            height: 233px;
        }

        .texto-escritura {
            font-family: monospace;
            white-space: pre-wrap;
            text-align: left;
            display: inline; /* Para evitar desplazamientos */
            font-weight: bold; /* Texto en negrita */
        }

        /* Cursor parpadeante */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background-color: black; /* Color del cursor */
            margin-left: 2px;
            animation: parpadeo 1s steps(1) infinite;
        }

        /* Efecto de parpadeo */
        @keyframes parpadeo {
            50% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <img id="imagenReferenciaMAQUINASYMECANISMOS" src="https://aulavirtual35.educa.madrid.org/ies.emiliocastelar.madrid/draftfile.php/41971/user/draft/810810209/Mecanismo.%20Dragon.gif" alt="Imagen de referenciaMAQUINASYMECANISMOS">
    
    <div id="fraseMAQUINASYMECANISMOS" class="texto-escritura"></div>

    <script>
        const imagenReferenciaMAQUINASYMECANISMOS = document.getElementById("imagenReferenciaMAQUINASYMECANISMOS");
        const fraseMAQUINASYMECANISMOS = "En esta unidad vamos a terminar de estudiar dos contenidos muy importantes para el desarrollo de soluciones tecnológicas: por un lado, ya hemos analizado los tipos de estructuras, fundamentales para las construcciones y la sustentación de las máquinas, y los esfuerzos a los que son sometidas; ahora, conoceremos los mecanismos que forman parte de las máquinas y permiten transmitir y transformar fuerzas y movimientos.";

        function escribirMAQUINASYMECANISMOS(frase, fraseElemento) {
            let iMAQUINASYMECANISMOS = 0;
            fraseElemento.innerHTML = ""; // Inicializamos el contenido del elemento con la frase

            const cursor = document.createElement("span"); // Creamos el cursor
            cursor.classList.add("cursor"); // Le damos la clase para el estilo
            fraseElemento.appendChild(cursor); // Añadimos el cursor al final del texto

            function agregarCaracterMAQUINASYMECANISMOS() {
                if (iMAQUINASYMECANISMOS < frase.length) {
                    cursor.remove(); // Quitamos temporalmente el cursor antes de añadir un nuevo carácter
                    fraseElemento.innerHTML += frase.charAt(iMAQUINASYMECANISMOS); // Añadimos el siguiente carácter
                    fraseElemento.appendChild(cursor); // Volvemos a añadir el cursor
                    iMAQUINASYMECANISMOS++;

                    // Velocidades diferentes para caracteres y espacios
                    const esEspacio = frase.charAt(iMAQUINASYMECANISMOS - 1) === ' ';
                    const delay = esEspacio ? Math.random() * (300 - 200) + 100 : Math.random() * (80 - 30) + 30;

                    setTimeout(agregarCaracterMAQUINASYMECANISMOS, delay); // Ajustamos el tiempo entre caracteres y palabras
                } else {
                    // Cuando se termina de escribir la frase, iniciamos el temporizador de 5 segundos
                    setTimeout(() => {
                        cursor.style.display = 'none'; // Ocultamos el cursor
                    }, 5000); // Desaparece el cursor después de 5 segundos
                }
            }

            agregarCaracterMAQUINASYMECANISMOS();
        }

        const opcionesObservadorMAQUINASYMECANISMOS = {
            rootMargin: "0px",
            threshold: 0.5
        };

        const observerMAQUINASYMECANISMOS = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    escribirMAQUINASYMECANISMOS(fraseMAQUINASYMECANISMOS, document.getElementById("fraseMAQUINASYMECANISMOS"));
                    observerMAQUINASYMECANISMOS.unobserve(imagenReferenciaMAQUINASYMECANISMOS); // Dejar de observar la imagen después de iniciar la escritura automática
                } else {
                    document.getElementById("fraseMAQUINASYMECANISMOS").innerHTML = ""; // Borrar la frase si la imagen ya no es observada
                }
            });
        }, opcionesObservadorMAQUINASYMECANISMOS);

        observerMAQUINASYMECANISMOS.observe(imagenReferenciaMAQUINASYMECANISMOS); // Observar la imagen de referencia
    </script>

</body>
</html>
