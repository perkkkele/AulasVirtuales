<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efecto de Escritura con Observador</title>
    <style>
        body {
            font-size: 0.9375rem;
            display: flex;
            align-items: flex-start;
        }

        img {
            display: block;
            margin-right: 20px;
            border: none;
            border-radius: 50%; /* Aplica los bordes redondeados */
            overflow: hidden;
        }

        .texto-escritura {
            font-family: monospace;
            overflow: hidden;
            white-space: pre-wrap;
            border-right: 0px;
            text-align: justify;
        }
    </style>
</head>
<body>
    <img id="imagenReferenciaXXXXX" width="200px" src="https://aulavirtual35.educa.madrid.org/ies.emiliocastelar.madrid/draftfile.php/41971/user/draft/30461145/image.gif" role="presentation">
    
    <div id="fraseXXXXX" class="texto-escritura"></div>

    <script>
        const imagenReferenciaXXXXX = document.getElementById("imagenReferenciaXXXXX");
        const fraseXXXXX = "¡Bienvenido a este curso! \n\nEn los próximos meses descubriremos algunos secretos del fascinante mundo de la tecnología y cómo influye en nuestras vidas diarias. Exploraremos desde la programación y el diseño de algoritmos hasta la robótica, la impresión 3D y más. Estudiaremos diferentes herramientas, potenciaremos nuestra capacidad de pensar de forma estructurada y lógica, fomentando el pensamiento crítico y la resolución de problemas.\n\nPrepárate para los desafíos, la innovación y la posibilidad de crear soluciones que impacten en nuestro entorno. ¡El futuro está en tus manos!";

        function escribirXXXXX(frase, fraseElemento) {
            let iXXXXX = 0;
            fraseElemento.innerHTML = "";

            function agregarCaracterXXXXX() {
                if (iXXXXX < frase.length) {
                    fraseElemento.innerHTML += frase.charAt(iXXXXX);
                    iXXXXX++;
                    setTimeout(agregarCaracterXXXXX, 50);
                }
            }

            agregarCaracterXXXXX();
        }

        const opcionesObservadorXXXXX = {
            rootMargin: "0px",
            threshold: 0.5
        };

        const observerXXXXX = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    escribirXXXXX(fraseXXXXX, document.getElementById("fraseXXXXX"));
                    observerXXXXX.unobserve(imagenReferenciaXXXXX); // Dejar de observar la imagen después de iniciar la escritura automática
                } else {
                    document.getElementById("fraseXXXXX").innerHTML = ""; // Borrar la frase si la imagen ya no es observada
                }
            });
        }, opcionesObservadorXXXXX);

        observerXXXXX.observe(imagenReferenciaXXXXX); // Observar la imagen de referencia
    </script>
<div id="welcomeMessage">Bienvenido a tu aula virtual</div>

<div id="welcomeMessage">Bienvenido a tu aula virtual</div>

<script>
(function() {
    function getUserName() {
        // Intenta obtener el nombre del menú de usuario
        var userMenu = document.querySelector('.usermenu .usertext');
        if (userMenu) {
            return userMenu.textContent.trim();
        }

        // Intenta obtener el nombre del área de perfil
        var profileName = document.querySelector('.userprofile .profile_tree .name');
        if (profileName) {
            return profileName.textContent.trim();
        }

        // Intenta obtener el nombre de la barra de navegación
        var navbarName = document.querySelector('.navbar-nav .usertext');
        if (navbarName) {
            return navbarName.textContent.trim();
        }

        // Si todo lo demás falla, busca cualquier elemento con la clase 'usertext'
        var anyUserText = document.querySelector('.usertext');
        if (anyUserText) {
            return anyUserText.textContent.trim();
        }

        return '';
    }

    function updateWelcomeMessage() {
        var userName = getUserName();
        var welcomeElement = document.getElementById('welcomeMessage');
        if (userName && welcomeElement) {
            welcomeElement.textContent = "Bienvenido, " + userName + ", a tu aula virtual";
        } else {
            console.log("No se pudo encontrar el nombre del usuario o el elemento de bienvenida.");
        }
    }

    // Ejecutar la función cuando el DOM esté completamente cargado
    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", updateWelcomeMessage);
    } else {
        updateWelcomeMessage();
    }
})();
</script>
    
</body>
</html>
